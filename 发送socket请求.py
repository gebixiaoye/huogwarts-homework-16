#发送socket请求
import socket# 客户端 发送一个数据，再接收一个数据
client = socket.socket(socket.AF_INET,socket.SOCK_STREAM) #声明socket类型，同时生成链接对象
client.connect(('10.1.28.52',8088)) #建立一个链接，连接到端口
msg = '<?xml version="1.0" encoding="UTF-8"?>\n<service>\n    <sys-header>\n        <data name="SYS_HEAD">\n            <struct>\n                <data name="MODULE_ID">\n                    <field length="2" scale="0" type="string">WY</field>\n                </data>\n                <data name="GLOBAL_SEQ">\n                    <field length="24" scale="0" type="string">WY2019101517420602300001</field>\n                </data>\n\n                <data name="TRAN_TIMESTAMP">\n                    <field length="9" scale="0" type="string">174206023</field>\n                </data>\n                <data name="SOURCE_BRANCH_NO">\n                    <field length="16" scale="0" type="string"/>\n                </data>\n                <data name="BRANCH_ID">\n                    <field length="12" scale="0" type="string">00901</field>\n                </data>\n                <data name="USER_LANG">\n                    <field length="30" scale="0" type="string">CN</field>\n                </data>\n                <data name="SEQ_NO">\n                    <field length="5" scale="0" type="string">00001</field>\n                </data>\n                <data name="SOURCE_TYPE">\n                    <field length="100" scale="0" type="string">WY</field>\n                </data>\n                <data name="TRAN_CODE">\n                    <field length="20" scale="0" type="string">FM144C</field>\n                </data>\n                <data name="SERVER_ID">\n                    <field length="30" scale="0" type="string"/>\n                </data>\n                <data name="MESSAGE_CODE">\n                    <field length="16" scale="0" type="string">3036</field>\n                </data>\n                <data name="SERVICE_CODE">\n                    <field length="16" scale="0" type="string">SVR_FIFCP</field>\n                </data>\n                <data name="AUTH_PASSWORD">\n                    <field length="30" scale="0" type="string"/>\n                </data>\n                <data name="APPR_FLAG">\n                    <field length="1" scale="0" type="string"/>\n                </data>\n                <data name="USER_ID">\n                    <field length="30" scale="0" type="string">9929</field>\n                </data>\n                <data name="PROGRAM_ID">\n                    <field length="20" scale="0" type="string"/>\n                </data>\n                <data name="AUTH_FLAG">\n                    <field length="1" scale="0" type="string">N</field>\n                </data>\n                <data name="TRAN_TYPE">\n                    <field length="2" scale="0" type="string"/>\n                </data>\n                <data name="APPR_USER_ID">\n                    <field length="30" scale="0" type="string"/>\n                </data>\n                <data name="DEST_BRANCH_NO">\n                    <field length="16" scale="0" type="string"/>\n                </data>\n                <data name="TRAN_DATE">\n                    <field length="100" scale="0" type="string">20191015</field>\n                </data>\n                <data name="AUTH_USER_ID">\n                    <field length="50" scale="0" type="string"/>\n                </data>\n                <data name="TRAN_MODE">\n                    <field length="1" scale="0" type="string">ONLINE</field>\n                </data>\n                <data name="MESSAGE_TYPE">\n                    <field length="16" scale="0" type="string">8223</field>\n                </data>\n                <data name="CORE_AUTH_FLAG">\n                    <field length="30" scale="0" type="string"/>\n                </data>\n                <data name="WS_ID">\n                    <field length="8" scale="0" type="string"/>\n                </data>\n                <data name="REVERSAL_TRAN_TYPE">\n                    <field length="0" scale="0" type="string"/>\n                </data>\n            </struct>\n        </data>\n    </sys-header>\n    <app-header>\n        <data name="APP_HEAD">\n            <struct>\n                <data name="PAGE_END">\n                    <field length="16" scale="0" type="string">0</field>\n                </data>\n                <data name="CURRENT_NUM">\n                    <field length="16" scale="0" type="string">0</field>\n                </data>\n                <data name="PGUP_OR_PGDN">\n                    <field length="16" scale="0" type="string">0</field>\n                </data>\n                <data name="PAGE_START">\n                    <field length="16" scale="0" type="string">0</field>\n                </data>\n                <data name="TOTAL_NUM">\n                    <field length="16" scale="0" type="string">-1</field>\n                </data>\n            </struct>\n        </data>\n    </app-header>\n    <local-header>\n        <data name="LOCAL_HEAD">\n            <struct/>\n        </data>\n    </local-header>\n    <body>\n                       <data name="GUARANTEE_TYPE">\n                               <field length="2" scale="0" type="string"></field>\n                       </data>\n                       <data name="BUSINESS_ID">\n                               <field length="6" scale="0" type="string">20190101010124</field>\n                       </data>\n                       <data name="IND_CERT_TYPE">\n                               <field length="1" scale="0" type="string">0</field>\n                       </data>\n                       <data name="ENT_CREDIT_ID">\n                               <field length="9" scale="0" type="string">91440300558654636X</field>\n                       </data>\n                       <data name="PAYBACK_TYPE">\n                               <field length="2" scale="0" type="string"></field>\n                       </data>\n                       <data name="IND_CERT_ID">\n                               <field length="17" scale="0" type="string">320105199303301816</field>\n                       </data>\n                       <data name="ENT_REG_ID">\n                               <field length="9" scale="0" type="string">91440300558654636X</field>\n                       </data>\n                       <data name="CHANNEL_CODE">\n                               <field length="2" scale="0" type="string">02</field>\n                       </data>\n                       <data name="PRODUCT_CODE">\n                               <field length="2" scale="0" type="string">511930</field>\n                       </data>\n                       <data name="IND_NAME">\n                               <field length="3" scale="0" type="string">小肖</field>\n                       </data>\n                       <data name="ENTRY_TYPE">\n                               <field length="2" scale="0" type="string"></field>\n                       </data>\n                       <data name="ENT_NAME">\n                               <field length="4" scale="0" type="string">东方微银科技（北京）有限公司深圳分公司</field>\n                       </data>\n                       <data name="APPLY_AMOUNT">\n                               <field length="2" scale="0" type="string">10000000</field>\n                       </data>\n                       <data name="APPLY_TERM">\n                               <field length="2" scale="0" type="string">12</field>\n                       </data>\n                       <data name="GRANT_CODE">\n                               <field length="18" scale="0" type="string">201851152152152125</field>\n                       </data>\n<data name="ENT_ORG_ID">\n                               <field length="18" scale="0" type="string">123456</field>\n                       </data>\n<data name="ENT_TAX_ID">\n                               <field length="18" scale="0" type="string">666</field>\n                       </data>\n    </body>\n</service>LC7GldxAt3C2AIfq1D6a4BK9nkfEPHs8mhjcx5i1MTkInxYPSWXQ95O9BUQ0E5jymUtet+5tDtLr6KiRvL5VgKvgn5cYIcOaqhvlJtlVUX471UqIERvL538P3nFjZLM7VJG1S57mQOOrxHcq0ThKv84ybgHeR7f00syw3+3QUnk='
length = len(msg.encode('utf-8'))
length = '%08d' % length    #算出8位字节的报文长度
msg = length + msg  #将报文长度放在报告头前
client.send(msg.encode('utf-8'))  #发送一条信息 python3 只接收btye流
#datalength = len(client.recv(102400)) #接收一个信息，并指定接收的大小 为10240字节
data = client.recv(102400)  #接收一个信息，并指定接收的大小 为10240字节
print('发出请求：',msg)#输出发送的信息
print('响应请求',data.decode()) #输出接收到的信息